#if 0
	shc Version 3.9.3a3, Generic Shell Script Compiler
	GNU GPL Version 3 Fedor Mankov <envieidoc@gmail.com>

	./shc -v -r -f io_wnu_uninstall.command 
#endif

static  char data [] = 
#define      text_z	1100
#define      text	((&data[38]))
	"\322\002\004\035\305\200\155\057\201\052\232\123\331\126\212\142"
	"\011\206\043\173\245\354\177\153\323\242\317\050\143\100\140\200"
	"\356\124\234\257\057\155\173\246\066\275\246\133\257\034\160\052"
	"\306\325\261\015\243\365\233\373\236\270\115\124\134\353\203\230"
	"\012\255\367\056\114\152\077\045\060\134\170\176\033\175\310\370"
	"\030\373\112\344\030\047\362\155\255\124\322\142\371\243\325\012"
	"\363\203\215\041\171\354\311\071\307\267\262\132\213\264\165\340"
	"\313\162\233\333\161\140\342\305\213\241\242\244\334\343\065\260"
	"\134\063\255\014\160\217\115\137\150\143\021\124\077\017\335\055"
	"\126\304\372\321\320\105\107\223\350\235\125\122\234\260\145\177"
	"\204\102\264\165\105\304\377\064\116\377\303\371\156\105\046\347"
	"\131\361\054\071\234\161\224\121\377\363\173\217\331\017\025\266"
	"\370\054\353\164\044\042\327\151\026\243\006\371\007\074\204\221"
	"\256\041\335\101\201\351\356\324\242\205\014\236\144\165\015\306"
	"\211\167\255\150\225\112\032\353\330\355\240\246\243\235\365\066"
	"\266\252\317\213\277\035\145\241\142\175\266\205\123\007\070\243"
	"\115\124\051\150\373\165\144\165\074\325\345\307\205\320\256\232"
	"\037\042\234\115\210\270\141\235\245\060\250\366\014\312\240\115"
	"\221\125\155\132\243\366\212\111\271\254\142\367\305\343\334\107"
	"\365\203\102\213\034\172\214\307\171\367\267\213\240\344\275\002"
	"\074\273\360\177\271\376\003\040\066\167\072\136\225\015\212\365"
	"\004\315\271\036\237\000\303\020\035\123\136\036\101\271\223\003"
	"\173\377\260\022\006\247\344\037\067\035\323\342\005\164\055\164"
	"\244\032\156\201\041\345\123\150\302\073\314\261\220\260\056\162"
	"\235\367\144\042\066\357\231\360\235\206\045\312\075\361\361\267"
	"\301\353\041\144\132\242\104\153\037\151\211\375\025\236\362\242"
	"\061\262\076\232\122\044\261\161\075\154\356\034\375\210\202\274"
	"\151\260\346\325\353\256\017\171\072\175\143\152\034\106\017\075"
	"\055\244\204\355\355\302\240\235\270\162\371\064\323\254\116\144"
	"\350\273\271\177\151\234\150\146\377\107\175\043\111\366\072\053"
	"\102\053\262\144\234\053\313\164\026\365\073\017\305\110\142\106"
	"\257\162\042\332\100\365\052\330\342\364\376\155\016\323\140\046"
	"\365\123\224\051\327\045\077\214\122\174\043\067\231\262\025\115"
	"\046\025\125\155\207\017\243\135\113\260\362\244\331\160\061\363"
	"\062\272\015\201\211\005\275\331\217\103\227\214\052\011\121\204"
	"\132\250\042\032\220\150\230\173\373\210\204\346\030\024\144\342"
	"\036\213\251\171\112\337\025\235\310\350\117\373\306\202\020\132"
	"\225\245\113\207\014\324\122\141\072\020\223\040\232\272\251\225"
	"\233\014\323\044\340\201\340\142\324\201\322\317\355\205\117\067"
	"\307\157\354\207\366\200\247\200\337\251\315\273\132\173\300\065"
	"\144\161\152\307\106\201\020\315\361\124\267\110\206\123\166\065"
	"\210\370\133\347\165\047\064\353\113\047\064\021\200\040\007\171"
	"\102\054\134\214\306\266\154\025\153\046\165\002\334\012\207\044"
	"\156\127\233\012\314\252\172\370\333\277\203\043\313\140\323\036"
	"\273\132\173\033\355\364\371\144\171\377\212\317\174\220\256\314"
	"\007\154\340\105\150\202\050\260\232\174\025\042\257\031\241\004"
	"\047\260\330\245\312\174\072\072\231\305\214\367\203\065\144\131"
	"\322\106\221\207\213\232\070\130\231\233\011\217\056\176\344\135"
	"\232\175\337\025\163\061\223\177\125\211\061\054\117\327\041\161"
	"\344\320\357\213\227\102\174\244\252\142\037\057\054\311\045\046"
	"\007\310\264\066\277\221\037\300\066\116\134\136\227\112\031\115"
	"\067\337\341\076\260\243\000\101\202\023\201\271\032\306\141\005"
	"\274\173\311\206\210\320\023\110\103\147\146\166\163\151\252\124"
	"\153\163\163\137\343\264\123\111\303\214\222\354\354\171\114\213"
	"\020\145\306\051\215\143\150\360\353\061\212\155\344\255\056\023"
	"\317\375\160\222\240\165\227\266\106\275\320\277\331\214\262\213"
	"\375\057\112\137\043\374\265\232\311\351\101\302\143\115\065\317"
	"\247\325\317\356\137\376\051\255\230\241\364\357\363\320\365\361"
	"\152\117\075\074\164\135\230\340\025\335\137\111\055\276\023\112"
	"\301\072\336\251\361\167\350\047\010\052\217\367\316\336\025\140"
	"\011\254\253\344\256\357\264\334\270\343\010\344\156\343\050\003"
	"\053\265\202\061\271\307\323\155\312\357\267\103\276\176\171\323"
	"\112\062\301\377\253\040\100\155\216\012\224\276\213\104\142\224"
	"\120\366\141\174\112\240\070\271\353\242\326\110\200\043\053\035"
	"\377\176\107\121\176\023\012\161\015\002\024\150\215\324\072\247"
	"\132\170\172\134\276\003\064\060\022\074\003\160\122\121\274\165"
	"\066\232\354\255\210\004\067\073\173\157\350\023\071\326\367\115"
	"\252\027\364\137\035\375\301\260\276\076\350\354\143\020\134\251"
	"\137\041\025\203\127\357\200\212\134\237\013\314\363\137\021\102"
	"\005\034\226\132\035\073\053\233\273\117\335\235\351\020\363\200"
	"\364\273\152\060\051\031\103\067\221\203\144\301\256\210\237\074"
	"\344\205\027\001\154\247\031\363\240\253\207\161\165\050\253\226"
	"\302\067\151\076\137\236\353\152\162\277\146\076\376\031\376\222"
	"\372\046\364\210\321\040\371\327\144\107\355\225\070\006\141\153"
	"\222\150\324\052\072\365\314\377\363\314\262\221\342\332\351\156"
	"\253\317\064\140\262\337\076\111\324\345\304\305\310\101\162\134"
	"\217\042\026\163\265\374\017\204\347\271\045\246\000\364\113\252"
	"\172\366\026\263\245\324\123\164\150\132\221\074\052\160\144\201"
	"\237\266\364\323\167\111\164\342\156\174\357\360\267\217\342\216"
	"\150\054\370\012\210\066\003\050\360\273\272\033\373\052\017\345"
	"\212\103\365\304\114\125\200\134\017\236\142\241\321\202\323\312"
	"\223\114"
#define      inlo_z	3
#define      inlo	((&data[1298]))
	"\253\325\101"
#define      tst2_z	19
#define      tst2	((&data[1302]))
	"\224\054\056\345\350\260\354\361\132\022\144\115\331\252\326\224"
	"\243\234\065\003\206"
#define      xecc_z	15
#define      xecc	((&data[1325]))
	"\201\361\145\107\210\342\075\105\301\210\043\111\140\277\140\367"
	"\307\101\175"
#define      msg1_z	62
#define      msg1	((&data[1350]))
	"\250\124\006\113\043\267\344\140\203\045\031\255\351\271\027\037"
	"\343\241\215\232\124\015\251\255\314\263\172\346\015\132\140\044"
	"\241\020\343\326\063\255\061\354\153\062\304\114\224\054\074\371"
	"\032\130\127\077\152\242\035\241\044\306\257\163\334\047\357\035"
	"\062\355\360\306\044\367\356"
#define      lsto_z	1
#define      lsto	((&data[1412]))
	"\331"
#define      date_z	1
#define      date	((&data[1413]))
	"\177"
#define      rlax_z	1
#define      rlax	((&data[1414]))
	"\314"
#define      tst1_z	22
#define      tst1	((&data[1419]))
	"\205\364\127\266\227\332\142\025\261\070\110\336\010\154\346\001"
	"\044\344\242\000\243\131\025\026\302\160\141\234\345\261\112"
#define      chk2_z	19
#define      chk2	((&data[1450]))
	"\025\207\377\013\363\326\035\177\010\204\212\146\152\132\037\063"
	"\372\044\010\210\276\051\117\057\173"
#define      pswd_z	256
#define      pswd	((&data[1476]))
	"\364\006\330\232\210\152\366\157\034\050\071\106\315\130\222\315"
	"\010\236\207\075\101\323\063\273\067\223\102\267\172\136\210\065"
	"\126\117\072\350\113\260\037\240\145\214\011\172\336\325\073\240"
	"\014\274\366\366\231\135\103\250\040\242\076\037\305\352\215\056"
	"\305\262\254\341\163\265\177\131\137\375\352\356\054\221\274\327"
	"\100\113\374\374\043\275\322\070\010\374\121\117\365\051\113\251"
	"\314\227\373\036\266\100\134\053\150\172\313\171\301\045\020\065"
	"\366\347\323\371\257\143\225\363\043\344\116\056\127\172\252\246"
	"\205\047\270\014\221\314\175\225\303\224\002\075\217\352\315\164"
	"\307\343\323\001\075\105\036\305\110\132\337\266\376\010\126\234"
	"\200\256\231\157\206\333\340\216\354\051\354\067\211\313\330\363"
	"\131\154\233\327\361\064\330\261\011\121\276\141\102\351\363\064"
	"\244\203\247\301\016\260\165\265\313\300\250\205\124\060\235\107"
	"\377\006\373\157\045\306\252\037\071\372\371\035\137\320\236\020"
	"\164\252\104\002\135\171\357\117\264\114\376\045\231\176\154\374"
	"\045\051\335\360\142\154\202\347\344\241\116\147\346\263\203\101"
	"\231\341\257\356\006\201\047\014\351\236\044\341\175\340\323"
#define      shll_z	10
#define      shll	((&data[1742]))
	"\364\135\017\351\265\033\234\343\323\111\226\146"
#define      chk1_z	22
#define      chk1	((&data[1755]))
	"\174\165\113\272\007\205\224\324\217\075\037\207\151\113\331\066"
	"\231\321\217\065\322\003\013\352\211"
#define      opts_z	1
#define      opts	((&data[1779]))
	"\215"
#define      msg2_z	19
#define      msg2	((&data[1782]))
	"\305\152\132\143\063\153\106\211\053\334\076\166\250\043\117\006"
	"\140\136\044\320\303\306\006\022"/* End of data[] */;
#define      hide_z	4096
#define DEBUGEXEC	0	/* Define as 1 to debug execvp calls */
#define TRACEABLE	1	/* Define as 1 to enable ptrace the executable */
#define BUSYBOXON	0	/* Define as 1 to enable work with busybox */

/* rtc.c */

#include <sys/stat.h>
#include <sys/types.h>

#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <unistd.h>

/* 'Alleged RC4' */

static unsigned char stte[256], indx, jndx, kndx;

/*
 * Reset arc4 stte. 
 */
void stte_0(void)
{
	indx = jndx = kndx = 0;
	do {
		stte[indx] = indx;
	} while (++indx);
}

/*
 * Set key. Can be used more than once. 
 */
void key(void * str, int len)
{
	unsigned char tmp, * ptr = (unsigned char *)str;
	while (len > 0) {
		do {
			tmp = stte[indx];
			kndx += tmp;
			kndx += ptr[(int)indx % len];
			stte[indx] = stte[kndx];
			stte[kndx] = tmp;
		} while (++indx);
		ptr += 256;
		len -= 256;
	}
}

/*
 * Crypt data. 
 */
void arc4(void * str, int len)
{
	unsigned char tmp, * ptr = (unsigned char *)str;
	while (len > 0) {
		indx++;
		tmp = stte[indx];
		jndx += tmp;
		stte[indx] = stte[jndx];
		stte[jndx] = tmp;
		tmp += stte[indx];
		*ptr ^= stte[tmp];
		ptr++;
		len--;
	}
}

/* End of ARC4 */

/*
 * Key with file invariants. 
 */
int key_with_file(char * file)
{
	struct stat statf[1];
	struct stat control[1];

	if (stat(file, statf) < 0)
		return -1;

	/* Turn on stable fields */
	memset(control, 0, sizeof(control));
	control->st_ino = statf->st_ino;
	control->st_dev = statf->st_dev;
	control->st_rdev = statf->st_rdev;
	control->st_uid = statf->st_uid;
	control->st_gid = statf->st_gid;
	control->st_size = statf->st_size;
	control->st_mtime = statf->st_mtime;
	control->st_ctime = statf->st_ctime;
	key(control, sizeof(control));
	return 0;
}

#if DEBUGEXEC
void debugexec(char * sh11, int argc, char ** argv)
{
	int i;
	fprintf(stderr, "shll=%s\n", sh11 ? sh11 : "<null>");
	fprintf(stderr, "argc=%d\n", argc);
	if (!argv) {
		fprintf(stderr, "argv=<null>\n");
	} else { 
		for (i = 0; i <= argc ; i++)
			fprintf(stderr, "argv[%d]=%.60s\n", i, argv[i] ? argv[i] : "<null>");
	}
}
#endif /* DEBUGEXEC */

void rmarg(char ** argv, char * arg)
{
	for (; argv && *argv && *argv != arg; argv++);
	for (; argv && *argv; argv++)
		*argv = argv[1];
}

int chkenv(int argc)
{
	char buff[512];
	unsigned long mask, m;
	int l, a, c;
	char * string;
	extern char ** environ;

	mask  = (unsigned long)&chkenv;
	mask ^= (unsigned long)getpid() * ~mask;
	sprintf(buff, "x%lx", mask);
	string = getenv(buff);
#if DEBUGEXEC
	fprintf(stderr, "getenv(%s)=%s\n", buff, string ? string : "<null>");
#endif
	l = strlen(buff);
	if (!string) {
		/* 1st */
		sprintf(&buff[l], "=%lu %d", mask, argc);
		putenv(strdup(buff));
		return 0;
	}
	c = sscanf(string, "%lu %d%c", &m, &a, buff);
	if (c == 2 && m == mask) {
		/* 3rd */
		rmarg(environ, &string[-l - 1]);
		return 1 + (argc - a);
	}
	return -1;
}

#if !TRACEABLE

#define _LINUX_SOURCE_COMPAT
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <fcntl.h>
#include <signal.h>
#include <stdio.h>
#include <unistd.h>

#if !defined(PTRACE_ATTACH) && defined(PT_ATTACH)
#	define PTRACE_ATTACH	PT_ATTACH
#endif
void untraceable(char * argv0)
{
	char proc[80];
	int pid, mine;

	switch(pid = fork()) {
	case  0:
		pid = getppid();
		/* For problematic SunOS ptrace */
#if defined(__FreeBSD__)
		sprintf(proc, "/proc/%d/mem", (int)pid);
#else
		sprintf(proc, "/proc/%d/as",  (int)pid);
#endif
		close(0);
		mine = !open(proc, O_RDWR|O_EXCL);
		if (!mine && errno != EBUSY)
			mine = !ptrace(PTRACE_ATTACH, pid, 0, 0);
		if (mine) {
			kill(pid, SIGCONT);
		} else {
			perror(argv0);
			kill(pid, SIGKILL);
		}
		_exit(mine);
	case -1:
		break;
	default:
		if (pid == waitpid(pid, 0, 0))
			return;
	}
	perror(argv0);
	_exit(1);
}
#endif /* !TRACEABLE */

char * xsh(int argc, char ** argv)
{
	char * scrpt;
	int ret, i, j;
	char ** varg;
	char * me = getenv("_");
	if (me == NULL) { me = argv[0]; }

	stte_0();
	 key(pswd, pswd_z);
	arc4(msg1, msg1_z);
	arc4(date, date_z);
	if (date[0] && (atoll(date)<time(NULL)))
		return msg1;
	arc4(shll, shll_z);
	arc4(inlo, inlo_z);
	arc4(xecc, xecc_z);
	arc4(lsto, lsto_z);
	arc4(tst1, tst1_z);
	 key(tst1, tst1_z);
	arc4(chk1, chk1_z);
	if ((chk1_z != tst1_z) || memcmp(tst1, chk1, tst1_z))
		return tst1;
	ret = chkenv(argc);
	arc4(msg2, msg2_z);
	if (ret < 0)
		return msg2;
	varg = (char **)calloc(argc + 10, sizeof(char *));
	if (!varg)
		return 0;
	if (ret) {
		arc4(rlax, rlax_z);
		if (!rlax[0] && key_with_file(shll))
			return shll;
		arc4(opts, opts_z);
		arc4(text, text_z);
		arc4(tst2, tst2_z);
		 key(tst2, tst2_z);
		arc4(chk2, chk2_z);
		if ((chk2_z != tst2_z) || memcmp(tst2, chk2, tst2_z))
			return tst2;
		/* Prepend hide_z spaces to script text to hide it. */
		scrpt = malloc(hide_z + text_z);
		if (!scrpt)
			return 0;
		memset(scrpt, (int) ' ', hide_z);
		memcpy(&scrpt[hide_z], text, text_z);
	} else {			/* Reexecute */
		if (*xecc) {
			scrpt = malloc(512);
			if (!scrpt)
				return 0;
			sprintf(scrpt, xecc, me);
		} else {
			scrpt = me;
		}
	}
	j = 0;
#if BUSYBOXON
	varg[j++] = "busybox";
	varg[j++] = "sh";
#else
	varg[j++] = argv[0];		/* My own name at execution */
#endif
	if (ret && *opts)
		varg[j++] = opts;	/* Options on 1st line of code */
	if (*inlo)
		varg[j++] = inlo;	/* Option introducing inline code */
	varg[j++] = scrpt;		/* The script itself */
	if (*lsto)
		varg[j++] = lsto;	/* Option meaning last option */
	i = (ret > 1) ? ret : 0;	/* Args numbering correction */
	while (i < argc)
		varg[j++] = argv[i++];	/* Main run-time arguments */
	varg[j] = 0;			/* NULL terminated array */
#if DEBUGEXEC
	debugexec(shll, j, varg);
#endif
	execvp(shll, varg);
	return shll;
}

int main(int argc, char ** argv)
{
#if DEBUGEXEC
	debugexec("main", argc, argv);
#endif
#if !TRACEABLE
	untraceable(argv[0]);
#endif
	argv[1] = xsh(argc, argv);
	fprintf(stderr, "%s%s%s: %s\n", argv[0],
		errno ? ": " : "",
		errno ? strerror(errno) : "",
		argv[1] ? argv[1] : "<null>"
	);
	return 1;
}
