#if 0
	shc Version 3.9.3a3, Generic Shell Script Compiler
	GNU GPL Version 3 Fedor Mankov <envieidoc@gmail.com>

	./shc -v -r -f io_wnu_uninstall.command 
#endif

static  char data [] = 
#define      lsto_z	1
#define      lsto	((&data[0]))
	"\325"
#define      text_z	1100
#define      text	((&data[107]))
	"\207\223\036\071\353\327\334\037\304\204\110\257\217\354\072\023"
	"\074\373\251\346\015\323\363\365\115\026\237\352\272\141\273\347"
	"\322\256\006\253\137\235\300\344\354\023\020\157\160\241\377\122"
	"\007\165\324\256\256\215\123\005\000\340\371\200\221\225\202\137"
	"\017\051\210\104\347\037\373\157\032\345\070\302\011\227\304\112"
	"\344\050\111\021\064\324\126\302\053\375\340\003\023\327\305\123"
	"\003\140\336\157\057\046\276\006\150\030\314\203\176\141\247\053"
	"\121\155\250\355\223\045\130\060\340\136\127\037\260\000\215\164"
	"\206\053\063\251\207\053\343\353\102\156\234\344\115\052\212\144"
	"\175\113\327\322\251\270\172\117\377\214\004\276\005\077\371\023"
	"\046\041\142\023\053\043\201\305\311\161\301\353\302\014\100\076"
	"\105\167\260\367\204\277\271\044\215\110\152\101\241\103\214\350"
	"\340\144\225\240\113\245\333\312\070\116\341\262\071\323\377\300"
	"\203\354\363\154\077\030\223\322\170\121\340\037\345\175\007\047"
	"\207\263\362\024\333\142\033\300\142\007\017\147\104\106\074\331"
	"\347\160\254\124\240\147\122\242\001\050\307\012\045\002\031\206"
	"\176\302\303\025\323\106\000\316\230\077\022\054\053\054\227\246"
	"\025\260\143\137\330\210\000\314\060\017\116\045\373\136\353\251"
	"\101\056\357\014\237\357\065\341\364\374\266\362\106\155\164\064"
	"\162\056\361\173\023\154\306\031\360\001\135\370\027\374\031\040"
	"\222\227\101\216\372\125\124\205\352\250\251\105\211\060\053\052"
	"\042\142\301\137\057\331\311\105\007\033\334\322\043\270\117\363"
	"\101\047\157\063\315\076\110\071\117\004\333\110\327\154\225\004"
	"\071\250\107\023\127\077\221\273\306\153\346\365\035\121\145\005"
	"\242\065\367\264\163\303\024\127\172\201\261\176\115\170\125\147"
	"\147\344\136\165\000\003\136\365\365\321\172\345\116\163\153\325"
	"\162\262\303\057\275\307\367\311\013\074\023\316\166\224\072\043"
	"\244\120\054\154\057\354\133\137\134\074\252\233\116\252\225\234"
	"\322\364\331\101\321\256\221\206\073\003\327\022\140\326\357\126"
	"\212\360\201\260\237\136\204\316\221\257\031\160\062\051\364\336"
	"\032\273\137\264\200\374\241\164\214\045\266\077\117\021\014\116"
	"\170\362\010\244\272\365\357\234\001\334\101\271\153\114\207\233"
	"\027\145\335\266\335\235\230\254\063\027\011\044\036\064\050\325"
	"\111\226\056\261\004\024\176\034\173\245\217\040\005\267\003\051"
	"\052\331\231\303\070\100\162\331\377\262\061\306\006\043\106\215"
	"\162\122\235\347\037\111\214\254\026\201\242\101\071\323\034\221"
	"\323\120\140\252\004\123\313\267\216\133\213\105\305\332\263\025"
	"\322\305\343\312\171\002\303\276\316\207\174\207\100\071\036\273"
	"\356\113\372\315\027\206\306\063\204\330\126\173\335\214\204\140"
	"\250\301\121\227\021\347\215\350\052\156\320\173\135\205\306\312"
	"\100\363\330\164\363\322\115\225\267\220\362\241\254\306\165\044"
	"\305\154\007\350\136\147\117\113\356\160\036\304\367\357\101\374"
	"\233\213\204\346\166\374\055\011\310\217\240\164\042\016\006\347"
	"\334\271\357\057\025\211\056\222\240\024\035\006\252\266\015\063"
	"\173\365\203\216\366\143\007\375\171\212\236\326\226\014\102\107"
	"\232\023\213\302\341\037\273\034\357\364\334\230\021\365\327\133"
	"\331\336\103\117\376\065\213\014\353\335\017\353\075\105\140\325"
	"\241\344\065\154\311\320\163\154\245\034\117\232\060\345\001\224"
	"\163\272\202\233\043\361\363\033\250\245\230\330\314\074\005\073"
	"\246\074\212\343\243\010\103\106\171\063\346\135\133\015\276\212"
	"\113\304\061\121\275\352\322\132\231\162\277\254\107\204\232\254"
	"\141\320\213\145\006\107\241\112\127\035\143\341\002\045\347\035"
	"\267\043\024\277\106\303\003\112\343\321\042\350\245\307\055\043"
	"\177\221\277\032\071\214\171\250\224\167\350\216\166\164\361\142"
	"\347\131\232\151\163\005\375\202\165\235\131\261\002\022\313\237"
	"\231\044\173\333\010\152\351\113\312\157\106\266\171\354\206\173"
	"\352\066\344\373\316\175\361\302\347\320\013\271\262\124\223\155"
	"\355\000\213\344\241\176\012\047\026\355\023\273\345\364\063\361"
	"\052\367\211\311\321\206\224\164\171\114\230\262\031\126\305\311"
	"\137\221\362\271\167\244\020\070\066\364\334\347\046\106\027\376"
	"\156\311\067\122\310\364\105\072\231\016\350\240\063\143\053\012"
	"\355\054\070\061\203\350\157\061\013\204\036\231\150\330\237\152"
	"\042\353\027\162\304\211\366\025\067\347\131\320\100\331\316\124"
	"\115\045\105\151\222\076\312\163\256\017\316\361\230\021\367\204"
	"\161\326\340\017\310\325\325\066\104\303\121\211\334\164\334\222"
	"\256\114\310\061\166\217\062\141\023\101\301\302\017\223\170\333"
	"\150\002\261\363\260\237\076\367\006\332\066\016\351\257\327\206"
	"\053\130\177\116\236\213\271\327\366\200\326\010\025\324\226\325"
	"\037\075\342\375\122\010\364\233\316\377\013\340\076\246\336\254"
	"\213\035\102\234\230\335\302\245\314\076\236\033\213\042\050\345"
	"\264\044\331\035\215\301\126\052\301\345\107\033\321\077\137\170"
	"\150\113\122\070\361\365\047\262\346\343\225\141\336\160\045\262"
	"\240\242\324\267\150\234\210\301\347\251\330\152\106\304\303\217"
	"\252\033\046\361\134\274\304\135\037\036\300\162\011\275\304\253"
	"\313\365\104\116\355\030\013\167\322\355\311\314\132\315\036\075"
	"\365\124\013\345\201\010\304\315\207\005\047\362\251\175\076\155"
	"\035\314\256\043\313\330\356\304\116\330\256\371\011\047\271\263"
	"\217\223\071\361\230\332\012\271\064\251\137\161\254\336\042\351"
	"\047\366\354\375\310\373\332\166\236\034\056\275\352\005\311\350"
	"\124\032\376\003\150\272\011\217\363\327\147\071\265\302\040\372"
	"\235\271\070\221\232\145\330\101\104\377\175\201\125\060\117\105"
	"\367\006\133\025\071\104\023\032\324\175\150\104\027\277\051\066"
	"\305\261\063\003\260\027\146\033\024\273\157\302\300\252\016\176"
	"\067\261\306\204\371\361\253\176\010\237\343\201\010\224\016\247"
	"\124\230\270"
#define      inlo_z	3
#define      inlo	((&data[1348]))
	"\346\263\242"
#define      msg1_z	62
#define      msg1	((&data[1360]))
	"\307\157\261\267\342\003\304\354\334\366\305\257\155\144\124\264"
	"\152\077\374\036\157\260\062\150\367\312\116\205\163\200\240\210"
	"\211\031\047\322\010\372\321\144\364\203\026\161\305\105\345\112"
	"\253\357\326\370\057\060\254\032\371\341\016\076\255\060\332\235"
	"\367\255\321\235\147\025\043\014\073\205\274\365\044\343\173\253"
	"\135\147"
#define      date_z	1
#define      date	((&data[1433]))
	"\342"
#define      chk2_z	19
#define      chk2	((&data[1434]))
	"\237\112\114\362\022\067\142\043\333\277\311\175\274\356\026\365"
	"\342\100\067"
#define      tst1_z	22
#define      tst1	((&data[1453]))
	"\061\066\213\053\155\017\205\217\311\204\132\016\261\305\037\011"
	"\001\301\054\312\361\314\244\373\204"
#define      pswd_z	256
#define      pswd	((&data[1496]))
	"\353\216\263\150\027\317\134\035\027\002\035\250\245\177\220\144"
	"\075\364\334\237\044\050\361\012\311\136\146\112\217\075\143\253"
	"\306\272\340\171\304\076\017\324\266\225\057\022\200\363\250\360"
	"\351\030\232\113\271\360\256\302\323\327\303\122\116\150\277\275"
	"\177\110\370\064\203\243\244\020\126\056\144\250\346\062\253\334"
	"\122\013\176\125\312\312\315\366\154\136\046\076\153\313\206\226"
	"\253\231\156\151\063\332\245\257\025\226\003\121\173\112\102\377"
	"\170\255\332\150\004\032\010\306\077\054\034\027\354\373\330\215"
	"\327\337\362\371\065\103\202\317\374\175\360\027\235\161\273\026"
	"\316\234\315\311\262\347\214\100\200\002\271\302\045\254\346\065"
	"\343\230\241\040\221\311\077\223\340\150\100\035\065\171\255\116"
	"\323\376\231\212\342\252\231\261\370\110\356\062\245\012\133\345"
	"\013\232\214\277\012\125\322\235\024\021\165\325\173\057\273\325"
	"\326\333\205\375\260\311\215\373\237\070\314\025\151\253\101\371"
	"\157\337\142\361\022\247\211\032\367\203\156\340\011\130\376\054"
	"\063\020\342\004\004\177\323\203\044\036\274\012\233\173\041\227"
	"\154\017\021\207\230\031\103\220\151\355\303\347\216\252\045\255"
	"\054\316\116\022\313\264\066\106\034\052\351\307\377\362\174\233"
	"\243\062\021\241\214\223\155\037\371\152\272\152\001"
#define      tst2_z	19
#define      tst2	((&data[1781]))
	"\250\334\130\010\077\377\165\211\372\015\270\113\205\247\140\060"
	"\263\142\175\177\212\165\172\230\137"
#define      xecc_z	15
#define      xecc	((&data[1806]))
	"\114\135\023\344\154\131\040\110\204\375\074\016\222\257\065\004"
	"\064\066\110"
#define      shll_z	10
#define      shll	((&data[1824]))
	"\360\115\151\351\126\206\130\053\260\262\255"
#define      chk1_z	22
#define      chk1	((&data[1836]))
	"\333\317\324\033\317\264\115\067\134\233\243\042\115\346\134\050"
	"\031\036\266\140\255\151\154\324\064\170\135"
#define      rlax_z	1
#define      rlax	((&data[1861]))
	"\040"
#define      msg2_z	19
#define      msg2	((&data[1863]))
	"\375\345\006\367\353\123\302\347\022\134\232\003\225\042\014\170"
	"\255\372\017\077\053"
#define      opts_z	1
#define      opts	((&data[1883]))
	"\343"/* End of data[] */;
#define      hide_z	4096
#define DEBUGEXEC	0	/* Define as 1 to debug execvp calls */
#define TRACEABLE	1	/* Define as 1 to enable ptrace the executable */
#define BUSYBOXON	0	/* Define as 1 to enable work with busybox */

/* rtc.c */

#include <sys/stat.h>
#include <sys/types.h>

#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <unistd.h>

/* 'Alleged RC4' */

static unsigned char stte[256], indx, jndx, kndx;

/*
 * Reset arc4 stte. 
 */
void stte_0(void)
{
	indx = jndx = kndx = 0;
	do {
		stte[indx] = indx;
	} while (++indx);
}

/*
 * Set key. Can be used more than once. 
 */
void key(void * str, int len)
{
	unsigned char tmp, * ptr = (unsigned char *)str;
	while (len > 0) {
		do {
			tmp = stte[indx];
			kndx += tmp;
			kndx += ptr[(int)indx % len];
			stte[indx] = stte[kndx];
			stte[kndx] = tmp;
		} while (++indx);
		ptr += 256;
		len -= 256;
	}
}

/*
 * Crypt data. 
 */
void arc4(void * str, int len)
{
	unsigned char tmp, * ptr = (unsigned char *)str;
	while (len > 0) {
		indx++;
		tmp = stte[indx];
		jndx += tmp;
		stte[indx] = stte[jndx];
		stte[jndx] = tmp;
		tmp += stte[indx];
		*ptr ^= stte[tmp];
		ptr++;
		len--;
	}
}

/* End of ARC4 */

/*
 * Key with file invariants. 
 */
int key_with_file(char * file)
{
	struct stat statf[1];
	struct stat control[1];

	if (stat(file, statf) < 0)
		return -1;

	/* Turn on stable fields */
	memset(control, 0, sizeof(control));
	control->st_ino = statf->st_ino;
	control->st_dev = statf->st_dev;
	control->st_rdev = statf->st_rdev;
	control->st_uid = statf->st_uid;
	control->st_gid = statf->st_gid;
	control->st_size = statf->st_size;
	control->st_mtime = statf->st_mtime;
	control->st_ctime = statf->st_ctime;
	key(control, sizeof(control));
	return 0;
}

#if DEBUGEXEC
void debugexec(char * sh11, int argc, char ** argv)
{
	int i;
	fprintf(stderr, "shll=%s\n", sh11 ? sh11 : "<null>");
	fprintf(stderr, "argc=%d\n", argc);
	if (!argv) {
		fprintf(stderr, "argv=<null>\n");
	} else { 
		for (i = 0; i <= argc ; i++)
			fprintf(stderr, "argv[%d]=%.60s\n", i, argv[i] ? argv[i] : "<null>");
	}
}
#endif /* DEBUGEXEC */

void rmarg(char ** argv, char * arg)
{
	for (; argv && *argv && *argv != arg; argv++);
	for (; argv && *argv; argv++)
		*argv = argv[1];
}

int chkenv(int argc)
{
	char buff[512];
	unsigned long mask, m;
	int l, a, c;
	char * string;
	extern char ** environ;

	mask  = (unsigned long)&chkenv;
	mask ^= (unsigned long)getpid() * ~mask;
	sprintf(buff, "x%lx", mask);
	string = getenv(buff);
#if DEBUGEXEC
	fprintf(stderr, "getenv(%s)=%s\n", buff, string ? string : "<null>");
#endif
	l = strlen(buff);
	if (!string) {
		/* 1st */
		sprintf(&buff[l], "=%lu %d", mask, argc);
		putenv(strdup(buff));
		return 0;
	}
	c = sscanf(string, "%lu %d%c", &m, &a, buff);
	if (c == 2 && m == mask) {
		/* 3rd */
		rmarg(environ, &string[-l - 1]);
		return 1 + (argc - a);
	}
	return -1;
}

#if !TRACEABLE

#define _LINUX_SOURCE_COMPAT
#include <sys/ptrace.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <fcntl.h>
#include <signal.h>
#include <stdio.h>
#include <unistd.h>

#if !defined(PTRACE_ATTACH) && defined(PT_ATTACH)
#	define PTRACE_ATTACH	PT_ATTACH
#endif
void untraceable(char * argv0)
{
	char proc[80];
	int pid, mine;

	switch(pid = fork()) {
	case  0:
		pid = getppid();
		/* For problematic SunOS ptrace */
#if defined(__FreeBSD__)
		sprintf(proc, "/proc/%d/mem", (int)pid);
#else
		sprintf(proc, "/proc/%d/as",  (int)pid);
#endif
		close(0);
		mine = !open(proc, O_RDWR|O_EXCL);
		if (!mine && errno != EBUSY)
			mine = !ptrace(PTRACE_ATTACH, pid, 0, 0);
		if (mine) {
			kill(pid, SIGCONT);
		} else {
			perror(argv0);
			kill(pid, SIGKILL);
		}
		_exit(mine);
	case -1:
		break;
	default:
		if (pid == waitpid(pid, 0, 0))
			return;
	}
	perror(argv0);
	_exit(1);
}
#endif /* !TRACEABLE */

char * xsh(int argc, char ** argv)
{
	char * scrpt;
	int ret, i, j;
	char ** varg;
	char * me = getenv("_");
	if (me == NULL) { me = argv[0]; }

	stte_0();
	 key(pswd, pswd_z);
	arc4(msg1, msg1_z);
	arc4(date, date_z);
	if (date[0] && (atoll(date)<time(NULL)))
		return msg1;
	arc4(shll, shll_z);
	arc4(inlo, inlo_z);
	arc4(xecc, xecc_z);
	arc4(lsto, lsto_z);
	arc4(tst1, tst1_z);
	 key(tst1, tst1_z);
	arc4(chk1, chk1_z);
	if ((chk1_z != tst1_z) || memcmp(tst1, chk1, tst1_z))
		return tst1;
	ret = chkenv(argc);
	arc4(msg2, msg2_z);
	if (ret < 0)
		return msg2;
	varg = (char **)calloc(argc + 10, sizeof(char *));
	if (!varg)
		return 0;
	if (ret) {
		arc4(rlax, rlax_z);
		if (!rlax[0] && key_with_file(shll))
			return shll;
		arc4(opts, opts_z);
		arc4(text, text_z);
		arc4(tst2, tst2_z);
		 key(tst2, tst2_z);
		arc4(chk2, chk2_z);
		if ((chk2_z != tst2_z) || memcmp(tst2, chk2, tst2_z))
			return tst2;
		/* Prepend hide_z spaces to script text to hide it. */
		scrpt = malloc(hide_z + text_z);
		if (!scrpt)
			return 0;
		memset(scrpt, (int) ' ', hide_z);
		memcpy(&scrpt[hide_z], text, text_z);
	} else {			/* Reexecute */
		if (*xecc) {
			scrpt = malloc(512);
			if (!scrpt)
				return 0;
			sprintf(scrpt, xecc, me);
		} else {
			scrpt = me;
		}
	}
	j = 0;
#if BUSYBOXON
	varg[j++] = "busybox";
	varg[j++] = "sh";
#else
	varg[j++] = argv[0];		/* My own name at execution */
#endif
	if (ret && *opts)
		varg[j++] = opts;	/* Options on 1st line of code */
	if (*inlo)
		varg[j++] = inlo;	/* Option introducing inline code */
	varg[j++] = scrpt;		/* The script itself */
	if (*lsto)
		varg[j++] = lsto;	/* Option meaning last option */
	i = (ret > 1) ? ret : 0;	/* Args numbering correction */
	while (i < argc)
		varg[j++] = argv[i++];	/* Main run-time arguments */
	varg[j] = 0;			/* NULL terminated array */
#if DEBUGEXEC
	debugexec(shll, j, varg);
#endif
	execvp(shll, varg);
	return shll;
}

int main(int argc, char ** argv)
{
#if DEBUGEXEC
	debugexec("main", argc, argv);
#endif
#if !TRACEABLE
	untraceable(argv[0]);
#endif
	argv[1] = xsh(argc, argv);
	fprintf(stderr, "%s%s%s: %s\n", argv[0],
		errno ? ": " : "",
		errno ? strerror(errno) : "",
		argv[1] ? argv[1] : "<null>"
	);
	return 1;
}
